[gd_scene load_steps=13 format=2]

[ext_resource path="res://resources/Objects/Spawner/CarSpawner.tscn" type="PackedScene" id=1]
[ext_resource path="res://resources/Objects/Networks/Road/left_right.tscn" type="PackedScene" id=2]
[ext_resource path="res://resources/Objects/Networks/Road/bottom_right.tscn" type="PackedScene" id=3]
[ext_resource path="res://resources/Objects/Networks/Road/top_bottom.tscn" type="PackedScene" id=4]
[ext_resource path="res://resources/Objects/Networks/Road/top_high_bottom.tscn" type="PackedScene" id=5]
[ext_resource path="res://src/Objects/Networks/RoadNavigation.gd" type="Script" id=6]
[ext_resource path="res://resources/Data/world_constants.tres" type="Resource" id=7]
[ext_resource path="res://resources/Objects/Networks/Road/bottom_left.tscn" type="PackedScene" id=8]
[ext_resource path="res://resources/Objects/Networks/Road/high_top_bottom.tscn" type="PackedScene" id=9]
[ext_resource path="res://resources/Objects/Networks/Road/top_right.tscn" type="PackedScene" id=10]
[ext_resource path="res://resources/Objects/Networks/Road/top_left.tscn" type="PackedScene" id=11]

[sub_resource type="GDScript" id=2]
resource_name = "Scene"
script/source = "extends Spatial

const Building := preload(\"res://src/Objects/Map/Building.gd\")

func _ready() -> void:
	var building_ids = {
		0: 0x26,
		1: 0x1D,
		2: 0x20,
		3: 0x1D,
		4: 0x1F,
		5: 0x23,
		6: 0x1E,
		7: 0x1E,
		8: 0x25,
		9: 0x1E,
		10: 0x1E,
		11: 0x1E,
		12: 0x1E,
		13: 0x24,
	}

	var idx = 0
	var road_naviagtion := $Road

	for child in road_naviagtion.get_children():
		var node: Building

		match idx:
			0, 1, 2, 3, 4, 5:
				node = Building.new({
					\"tile_coords\": [idx, 0],
					\"building_id\": building_ids[idx],
					\"size\": 1,
					\"name\": \"Road\",
				})
			6:
				node = Building.new({
					\"tile_coords\": [0, 1],
					\"building_id\": building_ids[idx],
					\"size\": 1,
					\"name\": \"Road\",
				})
			7:
				node = Building.new({
					\"tile_coords\": [5, 1],
					\"building_id\": building_ids[idx],
					\"size\": 1,
					\"name\": \"Road\",
				})
			8, 9, 10, 11, 12, 13:
				node = Building.new({
					\"tile_coords\": [idx - 8, 2],
					\"building_id\": building_ids[idx],
					\"size\": 1,
					\"name\": \"Road\",
				})

		road_naviagtion.insert_node(node)
		road_naviagtion.associate_object(node, child)
		idx += 1

	road_naviagtion.update_debug()
	$CarSpawner.spawn_car()
"

[node name="Spatial" type="Spatial"]
script = SubResource( 2 )

[node name="Road" type="Spatial" parent="." groups=["road-network"]]
unique_name_in_owner = true
script = ExtResource( 6 )
world_constants = ExtResource( 7 )

[node name="BottomLeft" parent="Road" instance=ExtResource( 3 )]

[node name="TopBottom" parent="Road" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 0, 0 )

[node name="TopHighBottom" parent="Road" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 32, 0, 0 )

[node name="TopBottom2" parent="Road" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 48, 8, 0 )

[node name="HighTopBottom" parent="Road" instance=ExtResource( 9 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 64, 0, 0 )

[node name="TopLeft" parent="Road" instance=ExtResource( 8 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 80, 0, 0 )

[node name="LeftRight" parent="Road" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 16 )

[node name="LeftRight2" parent="Road" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 80, 0, 16 )

[node name="BottomRight" parent="Road" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 32 )

[node name="TopBottom3" parent="Road" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 0, 32 )

[node name="TopBottom4" parent="Road" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 32, 0, 32 )

[node name="TopBottom5" parent="Road" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 48, 0, 32 )

[node name="TopBottom6" parent="Road" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 64, 0, 32 )

[node name="TopRight" parent="Road" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 80, 0, 32 )

[node name="CSGBox" type="CSGBox" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 41.7865, -1, 6 )
width = 128.791
depth = 78.4864

[node name="CSGBox2" type="CSGBox" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 48.0043, 3, 0 )
width = 16.0
height = 10.0
depth = 25.0

[node name="CSGBox3" type="CSGBox" parent="."]
transform = Transform( 0.894934, -0.446198, 0, 0.446198, 0.894934, 0, 0, 0, 1, 34.2, -0.5, 0 )
width = 18.0
height = 10.0
depth = 25.0

[node name="CSGBox4" type="CSGBox" parent="."]
transform = Transform( 0.894934, 0.446198, 0, -0.446198, 0.894934, 0, 0, 0, 1, 61.8294, -0.5, 0 )
width = 18.0
height = 10.0
depth = 25.0

[node name="Camera" type="Camera" parent="."]
transform = Transform( 0.993568, -0.0886679, 0.0704306, 0, 0.621979, 0.783034, -0.113236, -0.777998, 0.617978, 46.1015, 40.9621, 52.5325 )

[node name="CarSpawner" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 2, 2 )
road_network_path = NodePath("../Road")
